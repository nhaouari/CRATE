<!DOCTYPE html>
<html lang="en">
<head>
  <title>CRATEv2</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">


 <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js">
  </script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="./style2.css"/>

  <link rel="stylesheet"
          href="./bower_components/font-awesome/css/font-awesome.min.css" />
    
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha1/katex.min.css" integrity="sha384-8QOKbPtTFvh/lMY0qPVbXj9hDh+v8US0pD//FcoYFst2lCIf0BmT58+Heqj0IGyx" crossorigin="anonymous">

    <link href="https://cdn.quilljs.com/1.3.5/quill.snow.css" rel="stylesheet">
    <link rel="stylesheet" href="./node_modules/quill-cursors/dist/quill-cursors.css">
    <link rel='stylesheet' type='text/css' href='./node_modules/quill-comment/quill.comment.css' />



</head>




<body>

<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>                        
      </button>
      <a class="navbar-brand" href="./index.html">CRATEv2</a>
    </div>
    <div class="collapse navbar-collapse" id="myNavbar">
      <ul class="nav navbar-nav">
        <li class="active"><a href="#">Home</a></li>
        <li><a href="#">About</a></li>
        <li><a href="#">Projects</a></li>
        <li><a href="#">Contact</a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="#"><i class="fa fa-user" style="
    font-size: 20px;
    margin: 5px;
"></i></a></li>
      </ul>
    </div>
  </div>
</nav>
  
<div class="container-fluid text-center">    
 <a href="./document.html"><i class="fa fa-plus-circle " style="
  font-size: 60px; color:gray;   float: right;
"></i> </a>
  <h1> Local storage</h1>   
  <div class="container" id='documents'>

  </div>
</div> 

<footer class="container-fluid text-center">
  <p>Footer Text</p>
</footer>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha1/katex.min.js" integrity="sha384-GR8SEkOO1rBN/jnOcQDFcFmwXAevSLx7/Io9Ps1rkxWp983ZIuUGfxivlF/5f5eJ" crossorigin="anonymous"></script>
    <script src="./bower_components/quill/quill.min.js"></script>   
    <script src="./node_modules/quill-cursors/dist/quill-cursors.min.js"></script> 
    <script src="./bower_components/jquery/dist/jquery.min.js"></script>
    <script src="./bower_components/bootstrap/dist/js/bootstrap.min.js">
    </script>
    <script src="./bower_components/zeroclipboard/dist/ZeroClipboard.min.js">
    </script>
    <script
       src="./bower_components/jquery-shadow-animation/jquery.animate-shadow-min.js">
    </script>
    
    <!-- <script src="./bower_components/jquery-crate/build/jquery-crate.bundle.js">
    </script>   --> 

  <script src="../jquery-crate3/build/jquery-crate.bundle.js">
    </script>  
   <script src="./node_modules/quill-comment/quill-comment.js">
    </script>  
    <script src="./node_modules/dateformat/lib/dateformat.js">
    </script>  
    <script src="./node_modules/dateformat/lib/dateformat.js">
    </script>  
    <script src="./node_modules/store/dist/store.legacy.min.js"></script>

    <script type="text/javascript">
    
listDocuments();

// Remove document and referch the list of documents
function removeDocument(key) {
  console.log("the key is "+key);
  store.remove(key);
  listDocuments();
}

function listDocuments() {
  // body...
var documents= $('#documents');
 list = `<table class="table">
   <tbody>
`;
/* <thead>
 <tr>
    <th scope="row">#</th>
    <th scope="row">title</th>
    <th scope="row">date</th>
    </tr>
  </thead>*/
var i= 1;
store.each(function(value, key) {
            
if (key.includes("CRATE2"))
{
  session= key.split("-")[1];
  date = dateFormat(value.date, "dddd, mmmm dS, yyyy, h:MM:ss TT");
  title = value.title;
  row=`
  <tr>
      <td scope="row"><i class="fa fa-file"></i></td>
      <td scope="row"><a href="./document.html?${session}">${title}</a></td>
      <td scope="row">${date}</td>
      <td scope="row" onClick="removeDocument('${key}');"><i class="fa fa-trash-o" style="color:red">
        </i></td>  
    </tr>`;

 list=list+row;
 i++;
}
});


 list=list+`
  </tbody>
</table>`;

if (i==1) {
message= `<div class="alert alert-success">
  You Have not created yet <strong>CRATEv2!</strong>  documents. click on <a href="./document.html"><i class="fa fa-plus-circle" style="
  font-size: 30px; color:gray; position: relative;
  top: 5px;
"></i></a>  to creat your first document. 
</div>`;
list+=message; 
}
documents.html(list);

}
    </script>

</body>
</html>
